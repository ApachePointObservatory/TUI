<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Agile Guide WIndow</title>
</head>
<body>

<h1>Agile Guider</h1>

<p>A primitive guider for Agile that works from science images. The guider is primitive because the guide loop is in TUI instead of in the hub where it belongs. That will be corrected someday. Meanwhile, use with caution and keep these warnings in mind:
<ul>
    <li>Turn guiding off before taking calibration images (or any other images you don't want to guide on).
    <li>If two users are running this guider at the same time, disaster will result: multiple corrections will be commanded, one for each user!
    <li>This guider requires TUI 1.7.1 or later (because it requires RO package version 2.3.2 due to its new style of entry widgets).
</ul>

<h2>How to Install</h2>

<ul>
    <li>Move or copy the directory AgileGuider (which contains AgileGuideWindow.py and other files) into a <a href="http://www.apo.nmsu.edu/35m_operations/TUI/Scripts/TUIAdditions.html">TUIAdditions</a> directory.
    <li>If TUI is already running, restart it.
</ul>

<h2>How to Use</h2>

<ol>
    <li>Specify a guide star (set <b>Star Pos</b> and <b>Centroid Rad</b>) one of two ways:
    <ul>
        <li>Automatically: check the <b>Find</b> box to find the brightest star. The Find routine will search the next Agile exposure for the brightest star and enter Star Pos and Centroid Rad data for you. Find will uncheck itself once it finds a star. But if conditions are unfavorable, it may process several images before it is happy.
        <li>Manually: enter values for <b>Star Pos</b> and <b>Centroid Rad</b>. Press &lt;tab&gt;, &lt;return&gt; or &lt;enter&gt; to save the data (unsaved data is indicated by a pink background).
    </ul>
    <li>Check the <b>Guide</b> box. Then for every Agile image the guider will try to centroid a star at Star Pos and offset the telescope (using boresight offsets) to center the star at that position. However, it will ignore the new image if it is still busy processing an earlier image or if it cannot centroid the star.
    <li>If the guider is over-correcting, reduce <b>Corr Frac</b>. For exposures shorter than 15 seconds, this is likely to be necessary to avoid following seeing around. For longer exposures a value of 1.0 is recommended.
    <blockquote><p>Note that older versions of this guider needed a Corr Frac of about 0.5 to function correctly. However, this value now scales an automatic calculation based on the quality of the centroid fit. For reasonably long exposures the automatic calculation should suffice, so a value of 1.0 is recommended.
    </blockquote>
</ol>

<p>Notes:
<ul>
    <li>The guider will turn itself off if you slew to a new object. However, it will remain on for any kind of offset.
    <li>The guider never modifies any entry field (Star Pos and Centroid Rad) unless Find is checked.
    <li>Find overrides Guide, so if you are feeling lucky you can check both. Find will then find a star and Guide will guide on it. The risk is that Find may find a bogus star, which Guide will then try to guide on.
</ul>

<h2>Future Plans</h2>
<ul>
    <li>Integrate this primitive guider into TUI, so that it does not need to be separately installed as a TUIAddition.
    <li>Move the guide loop into the hub so that multiple users can see what is going on and can control the guider.
</ul>

<h2>Version History</h2>

<h3>1.0b7 2010-04-16</h3>

<ul>
    <li>Re-added Corr Frac, but it now scales the automatically computed correction factor introduced in 1.0b6. Thus 1.0 is the recommended value for exposures longer than 15 seconds, less for shorter exposures.
</ul>

<h3>1.0b6 2010-04-16</h3>

<ul>
    <li>Centroid Radius and Max Corr are now in arcsec.
    <li>Removed the Corr Frac tuning parameter: the upper limit of measured error was already the centroid radius.
    <li>Removed the Max Corr tuning parameter. Adopted the hub guider's algorithm for determining how much error to correct: the correction fraction is larger for a better centroid fit and the upper limit is the centroid radius.
    <li>Added the version number to the window name and the folder name so that it is easy to have multiple versions installed at the same time.
</ul>

<h3>1.0b5 2010-03-23</h3>

<ul>
    <li>Modified to use uncomputed offsets.
    <li>Modified to log errors in red and play the "command failed" sound cue.
    <li>Changed default centroid radius and max corr from 5.0 to 8.0 binned pixels.
</ul>

<h3>1.0b4 2010-03-18</h3>

<ul>
    <li>Modified to use new "afocus" actor.
    <li>The log now shows sky and measured position error and does not show the centroid measurement uncertainty.
</ul>

<h3>1.0b3</h3>

<ul>
    <li>Reorganized to put all files into a directory named AgileGuider and updated the installation instructions accordingly.
</ul>

<h3>1.0b2</h3>

<ul>
    <li>Added installation instructions to documentation
    <li>Added Max Err control
    <li>Most events are logged in the log window, including images that are skipped for some reason, measured error too large, no stars found, centroid not found and the version.
</ul>

<h3>1.0b1 2010-03-05</h3>

<p>First beta

</body>
</html>
